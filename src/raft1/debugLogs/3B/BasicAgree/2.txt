000004 INFO S0 Server initialized success, run ticker
000007 INFO S1 Server initialized success, run ticker
000007 INFO S2 Server initialized success, run ticker
000007 TRCE S0 is Status 0, At T0 Debug
Test (3B): basic agreement (reliable network)...
000008 ERRO 当前节点有0个节点提交了索引为1的条目
000008 TRCE S2 is Status 0, At T0 Debug
000008 TRCE S1 is Status 0, At T0 Debug
022284 TRCE S1 is Status 1, At T1 Debug

// S1 作为Leader收到日志条目
022553 LOG1 Leader S1 At T1, Receive Log, CurLogLength:2
022894 TRCE S2 is Status 1, At T1 Debug
024621 TRCE S1 is Status 2, At T1 Debug
024621 TRCE S1 is Status 2, At T1 Debug

024622 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=0, LogTerm=1, curCount=0, effctiveNum=2
024622 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=0, effctiveNum=2
024622 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=0, LogTerm=1, curCount=0, effctiveNum=2

024622 CMIT Leader S1 At T1, Refresh CommitIndex:0
024622 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=0, LogTerm=1, curCount=0, effctiveNum=2
024623 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=0, effctiveNum=2
024623 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=0, LogTerm=1, curCount=0, effctiveNum=2
024624 CMIT Leader S1 At T1, Refresh CommitIndex:0

024625 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:1, prevLogIndex:0
024626 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:1, prevLogIndex:0

024628 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:1, prevLogIndex:0
024629 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:1, prevLogIndex:0

024630 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 1
024630 LOG1 S0 At T1 Satisfied prevLogIndex:0, prevLogTerm:0, Start AppendEntries(Len1)
024630 LOG2 S0 At T1, NewEntries:0 Exceed, toInsertIndex:1, appendLength:1
024630 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 1
024631 LOG1 S2 At T1 Satisfied prevLogIndex:0, prevLogTerm:0, Start AppendEntries(Len1)
024631 LOG2 S2 At T1, NewEntries:0 Exceed, toInsertIndex:1, appendLength:1
024631 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
024630 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
// S2 接收日志成功
024631 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:1,Success, new NextIndex:2
024631 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 1
024632 LOG1 S0 At T1 Satisfied prevLogIndex:0, prevLogTerm:0, Start AppendEntries(Len1)
024632 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
024631 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 1
024635 LOG1 S2 At T1 Satisfied prevLogIndex:0, prevLogTerm:0, Start AppendEntries(Len1)
024635 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
// S0 接收日志成功
024632 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:1,Success, new NextIndex:2
024637 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:1,Success, new NextIndex:2
024638 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:1,Success, new NextIndex:2

024948 TRCE S0 is Status 0, At T1 Debug
025659 TRCE S2 is Status 0, At T1 Debug
025760 TRCE S1 is Status 2, At T1 Debug
// S1 检查日志接收情况,发现当targetCommitIndex=1时，count=effectiveNum，不进入修改；当targetCommitIndex=2时，由于要求targetCommitIndex < len(rf.log),无法检查，因此导致不能更新
// 将targetCommitIndex < len(rf.log) 改为 <=
025761 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
025761 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
025761 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2

025761 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
025762 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
025764 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
025764 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
025764 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
025765 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
025765 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
025765 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
025765 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
025767 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
025796 TRCE S0 is Status 0, At T1 Debug
028048 TRCE S0 is Status 0, At T1 Debug
028509 TRCE S2 is Status 0, At T1 Debug
029211 TRCE S1 is Status 2, At T1 Debug
029212 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
029213 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
029213 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2
029213 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
029213 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
029215 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
029215 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
029215 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
029216 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
029216 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
029216 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
029216 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
029217 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
029288 TRCE S2 is Status 0, At T1 Debug
030638 TRCE S1 is Status 2, At T1 Debug
030640 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
030640 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
030640 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2
030640 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
030641 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
030643 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
030644 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
030644 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
030644 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
030645 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
030645 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
030646 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
030646 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
031225 TRCE S2 is Status 0, At T1 Debug
032073 TRCE S0 is Status 0, At T1 Debug
032792 TRCE S1 is Status 2, At T1 Debug
032794 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
032795 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
032795 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2
032795 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
032796 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
032797 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
032797 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
032797 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
032798 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
032798 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
032798 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
032798 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
032800 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
033207 TRCE S0 is Status 0, At T1 Debug
033273 TRCE S2 is Status 0, At T1 Debug
034189 TRCE S0 is Status 0, At T1 Debug
034541 TRCE S2 is Status 0, At T1 Debug
036159 TRCE S1 is Status 2, At T1 Debug
036161 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
036161 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
036161 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2
036161 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
036162 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
036164 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
036164 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
036164 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
036164 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
036164 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
036165 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
036165 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
036166 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
036778 TRCE S0 is Status 0, At T1 Debug
037947 TRCE S1 is Status 2, At T1 Debug
038051 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
038053 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
038053 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
038053 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
038053 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
038053 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
038054 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
038054 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2
038055 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
038055 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
038055 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
038056 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
038057 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
038889 TRCE S2 is Status 0, At T1 Debug
039374 TRCE S1 is Status 2, At T1 Debug
039376 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[0]=1, LogTerm=1, curCount=0, effctiveNum=2
039376 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[1]=0, LogTerm=1, curCount=1, effctiveNum=2
039376 CMIT Leader S1 Check CommitIndex, targetCommitIndex=1, MatchIndex[2]=1, LogTerm=1, curCount=1, effctiveNum=2
039377 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0, prevLogIndex:1
039377 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0, prevLogIndex:1
039380 TRCE S0 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
039380 TRCE S2 At T1 Recive AppendEntries RPC From Leader S1 In T1, Entries Len 0
039380 LOG1 S2 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
039380 CMIT S2 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
039380 LOG1 S0 At T1 Satisfied prevLogIndex:1, prevLogTerm:1, Start AppendEntries(Len0)
039381 LEAD S1 Sending AppendEntries RPC to S2 At T1, Log Length:0,Success, new NextIndex:2
039381 CMIT S0 At T1, CommitIndex=0, args.LeaderCommit=0, appendLogIndex=1
039383 LEAD S1 Sending AppendEntries RPC to S0 At T1, Log Length:0,Success, new NextIndex:2
039695 TRCE S0 is Status 0, At T1 Debug
040897 TRCE S2 is Status 0, At T1 Debug
042317 TRCE S0 is Status 0, At T1 Debug
Fatal: one(100) failed to reach agreement
        /root/Golang/MIT-Raft/src/raft1/test.go:274
        /root/Golang/MIT-Raft/src/raft1/raft_test.go:156
info: wrote visualization to /tmp/porcupine-2669413259.html
--- FAIL: TestBasicAgree3B (4.27s)
FAIL
exit status 1
FAIL	6.5840/raft1	4.272s
